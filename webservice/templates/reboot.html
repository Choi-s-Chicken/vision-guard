{% extends 'base.html' %}
 
{% block content %}
<style>
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(128, 128, 128, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>

<div id="modal" class="modal-overlay">
    <div class="modal-content">
        <div class="text-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div><br>
        <span>{{ detail }}</span>
        <span id="reboot-title"></span><br>
        <p><a href="/">홈으로</a></p>
    </div>
</div>

{% if reboot_status == true %}
<script>
    let countdown = 60;
    const rebootTitle = document.getElementById('reboot-title');

    const interval = setInterval(() => {
        rebootTitle.textContent = `${countdown}초 뒤 홈으로 이동합니다.`;
        countdown--;

        if (countdown <= 0) {
            clearInterval(interval);
            window.location.href = '/';
        }
    }, 1000);
</script>
{% else %}
<script>
    let countdown = 5;
    const rebootTitle = document.getElementById('reboot-title');

    const interval = setInterval(() => {
        countdown--;
        rebootTitle.textContent = `\n${countdown}초 뒤 홈으로 이동합니다.`;

        if (countdown <= 0) {
            clearInterval(interval);
            window.location.href = '/';
        }
    }, 1000);
</script>
{% endif %}

{% endblock %}