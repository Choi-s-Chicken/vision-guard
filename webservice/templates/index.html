{% extends 'base.html' %}
 
{% block content %}
<style>
    #true {
        color: green;
    }
    #false {
        color: red;
    }
</style>

<div>
    {% if alarm %}
    <div class="alert alert-warning" role="alert">
        경보가 작동 중입니다. <a href='/alarm/turnoff'>경보 해제</a>
    </div>
    {% endif %}
    {% if status == status_normal %}
    <div class="alert alert-primary" role="alert">
        제품이 잘 작동되고 있습니다.
    </div>
    {% elif status == status_warn %}
    <div class="alert alert-warning" role="alert">
        확인할 사항이 있습니다.</a>
    </div>
    {% elif status == status_error %}
    <div class="alert alert-danger" role="alert">
        에러가 발생했습니다. <a href="/system/log">기록 보기</a>
    </div>
    {% elif status == status_criti %}
    <div class="alert alert-danger" role="alert">
        심각한 에러가 발생했습니다. <a href="/system/log">기록 보기</a>
    </div>
    {% endif %}
</div>


<h4>제품 정보</h4>
<p>
    모델: {{ prct_model }}<br>
    시리얼: {{ prct_serial }}
</p>
<p>
    마지막 서버 연결: {{ last_server_connect_time }}<br>
</p>
<p>
    경보기능: {% if alarm_poss %}<span id='true'>활성화</span>{% else %}<span id='false'>비활성화</span>{% endif %}<br>
    재부팅기능: {% if reboot_poss %}<span id='true'>활성화</span>{% else %}<span id='false'>비활성화</span>{% endif %}<br>
</p>
<hr>

<h4>제어 메뉴</h4>
{% if alarm == False %
    <a href="/alarm/turnon"><button type="button" class="btn btn-outline-danger">경보</button></a>
{% else %}
    <a href="/alarm/turnoff"><button type="button" class="btn btn-outline-warning">경보해제</button></a>
{% endif %}
<button id="reservice-btn" type="button" class="btn btn-outline-primary">서비스재시작</button>
<button id="reboot-btn" type="button" class="btn btn-outline-primary">재부팅</button><br>
<hr>

<a href="/system/log">기록 보기</a><br>
<a href="/changepw">관리자 비밀번호 변경</a>

<script>
    const reboot = document.getElementById('reboot-btn');
    const reservice = document.getElementById('reservice-btn');

    reboot.addEventListener('click', () => {
        if (!confirm('재부팅하시겠습니까?'))
            return;

        window.location.href = '/system/reboot';
    });

    reservice.addEventListener('click', () => {
        if (!confirm('서비스를 재시작하시겠습니까?'))
            return;

        window.location.href = '/system/reservice';
    });
</script>

{% endblock %}